import './polyfills.server.mjs';
import{a as F,b as k}from"./chunk-ISNGCUEL.mjs";import{c as Ne}from"./chunk-ZJ5AMYZO.mjs";import{a as qe,b as Q}from"./chunk-J3EAE456.mjs";import{a as ri,b as ot}from"./chunk-HMSZ3WRG.mjs";import{a as Qe,b as ti}from"./chunk-ZYNMR3FV.mjs";import{a as ei,b as tt,c as ii,d as et,e as si,f as it,g as ni,h as st,i as oi,j as nt}from"./chunk-XYF5ZNBO.mjs";import{c as B}from"./chunk-UBCID47O.mjs";import{E as Je,H as We,a as Ue,b as Be,d as Ht,e as bt,f as ze,g as He,h as Ge,i as Ve,j as Ke,k as Gt,l as Tt,m as Ze,n as N,q as Xe,r as M,s as Ct,v as Ye}from"./chunk-TNSAREYT.mjs";import{a as _e,d as Le}from"./chunk-KCQOCMHZ.mjs";import{$b as Re,A as $,Ab as vt,Ac as De,C as E,D as Nt,Db as Oe,E as de,Eb as we,Fc as Pe,G as ft,H as le,Ic as $e,J as he,L as R,O as _t,Qa as lt,R as me,Sa as V,T as ge,Ta as ht,U as ye,V as ve,Wb as je,X as Lt,Y as pt,Ya as Te,Z as T,_ as Ee,ab as X,ba as S,c as Z,ca as Ut,eb as mt,f as at,fa as O,ga as p,gb as L,h as ce,ha as _,hb as U,i as ae,ia as ut,ib as gt,j as fe,ja as Bt,k as pe,kc as Me,lb as Ce,m as w,ma as xe,mc as Et,na as Ie,oa as Se,ob as Ae,pb as zt,pc as Fe,q as ue,qc as xt,r as l,t as $t,ta as be,tb as q,ua as dt,ub as yt,wc as It,xc as St,z as J,zc as ke}from"./chunk-OUEVK6MT.mjs";import{a as I,b}from"./chunk-KRLCULJA.mjs";var At=(()=>{let e=class e{constructor(){this.toastSubject=new at}show(i,s,c){this.toastSubject.next({type:i,title:s,message:c})}getToast(){return this.toastSubject.asObservable()}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Wi(t,e){if(t&1){let o=Ce();L(0,"div",1)(1,"div",2)(2,"mat-icon",3),q(3),U()(),L(4,"div",4)(5,"div",5)(6,"p",6),q(7),U(),L(8,"div",7)(9,"mat-icon",8),Ae("click",function(){xe(o);let s=zt();return Ie(s.closeToast())}),q(10,"clear"),U()()(),L(11,"div",9)(12,"p",10),q(13),U()()()()}if(t&2){let o=zt();X("ngClass",o.toastClass),V(2),X("ngClass",o.iconClass),V(1),yt(o.icon),V(3),X("ngClass",o.titleClass),V(1),yt(o.title),V(6),yt(o.message)}}var ai=(()=>{let e=class e{constructor(i){this.toastService=i,this.title="",this.message="",this.visible=!1,this.icon="",this.toastClass="",this.iconClass="",this.titleClass="",this.toastService.getToast().subscribe(s=>{this.title=s.title,this.message=s.message,this.visible=!0,this.setToastType(s.type),setTimeout(()=>this.closeToast(),5e3)})}setToastType(i){switch(i){case"success":this.toastClass="bg-green-100 toast-show",this.iconClass="text-green-500",this.titleClass="text-green-600",this.icon="check_circle";break;case"error":this.toastClass="bg-red-100 toast-show",this.iconClass="text-red-500",this.titleClass="text-red-600",this.icon="highlight_off";break;default:this.toastClass="bg-gray-100 toast-show",this.iconClass="text-gray-500",this.titleClass="text-gray-600",this.icon="info";break}}closeToast(){this.toastClass=this.toastClass.replace("toast-show","toast-hide"),setTimeout(()=>this.visible=!1,300)}};e.\u0275fac=function(s){return new(s||e)(ht(At))},e.\u0275cmp=ut({type:e,selectors:[["app-am-toast"]],standalone:!0,features:[vt],decls:1,vars:1,consts:[["class","fixed bottom-4 right-4 w-96 h-16 flex rounded-lg p-1 toast-container",3,"ngClass",4,"ngIf"],[1,"fixed","bottom-4","right-4","w-96","h-16","flex","rounded-lg","p-1","toast-container",3,"ngClass"],[1,"w-14","h-full","flex","items-center","justify-center"],[1,"text-3xl","text-center","pt-1","min-h-full","min-w-full",3,"ngClass"],[1,"w-full","h-full"],[1,"w-full","h-1/2","flex","justify-between"],[1,"text-sm","font-bold","pt-2",3,"ngClass"],[1,"w-6","h-full"],[1,"cursor-pointer",3,"click"],[1,"w-full","h-1/2"],[1,"text-gray-700","text-xs","m-0"]],template:function(s,c){s&1&&mt(0,Wi,14,6,"div",0),s&2&&X("ngIf",c.visible)},dependencies:[xt,Me,Et,ti,Qe],styles:[".toast-container[_ngcontent-%COMP%]{opacity:0;transform:translateY(100%);transition:opacity .3s ease,transform .3s ease}.toast-show[_ngcontent-%COMP%]{opacity:1;transform:translateY(0)}.toast-hide[_ngcontent-%COMP%]{opacity:0;transform:translateY(100%)}"]});let t=e;return t})();function qi(t,e){t&1&&(L(0,"div",3),gt(1,"div",4),U())}var fi=(()=>{let e=class e{constructor(i){this.store=i,this.title="app-web-am",this.isLoading$=new Z}ngOnInit(){this.isLoading$=this.store.select(Ye)}};e.\u0275fac=function(s){return new(s||e)(ht(N))},e.\u0275cmp=ut({type:e,selectors:[["app-root"]],standalone:!0,features:[vt],decls:6,vars:3,consts:[[1,"h-screen"],["class","loader-wrapper h-screen w-screen fixed top-0 left-0 bg-gray-800/90 z-50 flex justify-center items-center",4,"ngIf"],[1,"toast-wrapper"],[1,"loader-wrapper","h-screen","w-screen","fixed","top-0","left-0","bg-gray-800/90","z-50","flex","justify-center","items-center"],[1,"loader"]],template:function(s,c){s&1&&(L(0,"div",0),mt(1,qi,2,0,"div",1),Oe(2,"async"),L(3,"div",2),gt(4,"app-am-toast"),U(),gt(5,"router-outlet"),U()),s&2&&(V(1),X("ngIf",we(2,1,c.isLoading$)===!0))},dependencies:[xt,Et,Fe,_e,We,Je,ai],styles:[".loader[_ngcontent-%COMP%]{border:8px solid #f3f3f3;border-top:8px solid rgb(236 72 153);border-radius:50%;width:60px;height:60px;animation:_ngcontent-%COMP%_spin 2s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]});let t=e;return t})();var pi=[{path:"",redirectTo:"/dashboard",pathMatch:"full"},{path:"login",loadComponent:()=>import("./chunk-VWGGTRVC.mjs")},{path:"dashboard",loadComponent:()=>import("./chunk-4U52NQP6.mjs")},{path:"register",loadComponent:()=>import("./chunk-QYYVKYP6.mjs")},{path:"activity",loadComponent:()=>import("./chunk-3YGN3ZHI.mjs")},{path:"activity/game-launcher",loadComponent:()=>import("./chunk-RFS4R256.mjs")},{path:"settings",loadComponent:()=>import("./chunk-7FMPRWLS.mjs")}];var ct="PERFORM_ACTION",Qi="REFRESH",vi="RESET",Ei="ROLLBACK",xi="COMMIT",Ii="SWEEP",Si="TOGGLE_ACTION",bi="SET_ACTIONS_ACTIVE",Ti="JUMP_TO_STATE",Ci="JUMP_TO_ACTION",se="IMPORT_STATE",Ai="LOCK_CHANGES",Oi="PAUSE_RECORDING",W=class{constructor(e,o){if(this.action=e,this.timestamp=o,this.type=ct,typeof e.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}},Vt=class{constructor(){this.type=Qi}},Kt=class{constructor(e){this.timestamp=e,this.type=vi}},Zt=class{constructor(e){this.timestamp=e,this.type=Ei}},Xt=class{constructor(e){this.timestamp=e,this.type=xi}},Yt=class{constructor(){this.type=Ii}},Jt=class{constructor(e){this.id=e,this.type=Si}},ui=class{constructor(e,o,i=!0){this.start=e,this.end=o,this.active=i,this.type=bi}},Wt=class{constructor(e){this.index=e,this.type=Ti}},qt=class{constructor(e){this.actionId=e,this.type=Ci}},Qt=class{constructor(e){this.nextLiftedState=e,this.type=se}},te=class{constructor(e){this.status=e,this.type=Ai}},ee=class{constructor(e){this.status=e,this.type=Oi}},di=class{constructor(){this.maxAge=!1}},Mt=new O("@ngrx/store-devtools Options"),li=new O("@ngrx/store-devtools Initial Config");function wi(){return null}var ts="NgRx Store DevTools";function es(t){let e={maxAge:!1,monitor:wi,actionSanitizer:void 0,stateSanitizer:void 0,name:ts,serialize:!1,logOnly:!1,autoPause:!1,trace:!1,traceLimit:75,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0},connectInZone:!1},o=typeof t=="function"?t():t,i=o.logOnly?{pause:!0,export:!0,test:!0}:!1,s=o.features||i||e.features;s.import===!0&&(s.import="custom");let c=Object.assign({},e,{features:s},o);if(c.maxAge&&c.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${c.maxAge}`);return c}function hi(t,e){return t.filter(o=>e.indexOf(o)<0)}function ji(t){let{computedStates:e,currentStateIndex:o}=t;if(o>=e.length){let{state:s}=e[e.length-1];return s}let{state:i}=e[o];return i}function hn(t){return t.actionsById[t.nextActionId-1]}function rt(t){return new W(t,+Date.now())}function is(t,e){return Object.keys(e).reduce((o,i)=>{let s=Number(i);return o[s]=Ri(t,e[s],s),o},{})}function Ri(t,e,o){return b(I({},e),{action:t(e.action,o)})}function ss(t,e){return e.map((o,i)=>({state:Mi(t,o.state,i),error:o.error}))}function Mi(t,e,o){return t(e,o)}function Fi(t){return t.predicate||t.actionsSafelist||t.actionsBlocklist}function ns(t,e,o,i){let s=[],c={},r=[];return t.stagedActionIds.forEach((n,y)=>{let u=t.actionsById[n];u&&(y&&ne(t.computedStates[y],u,e,o,i)||(c[n]=u,s.push(n),r.push(t.computedStates[y])))}),b(I({},t),{stagedActionIds:s,actionsById:c,computedStates:r})}function ne(t,e,o,i,s){let c=o&&!o(t,e.action),r=i&&!e.action.type.match(i.map(y=>mi(y)).join("|")),n=s&&e.action.type.match(s.map(y=>mi(y)).join("|"));return c||r||n}function mi(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ki(t){return{ngZone:t?_(Te):null,connectInZone:t}}var Ft=(()=>{let e=class e extends bt{};e.\u0275fac=(()=>{let i;return function(c){return(i||(i=Se(e)))(c||e)}})(),e.\u0275prov=S({token:e,factory:e.\u0275fac});let t=e;return t})(),wt={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},ie=new O("@ngrx/store-devtools Redux Devtools Extension"),Di=(()=>{let _DevtoolsExtension=class _DevtoolsExtension{constructor(t,e,o){this.config=e,this.dispatcher=o,this.zoneConfig=ki(this.config.connectInZone),this.devtoolsExtension=t,this.createActionStreams()}notify(t,e){if(this.devtoolsExtension)if(t.type===ct){if(e.isLocked||e.isPaused)return;let o=ji(e);if(Fi(this.config)&&ne(o,t,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;let i=this.config.stateSanitizer?Mi(this.config.stateSanitizer,o,e.currentStateIndex):o,s=this.config.actionSanitizer?Ri(this.config.actionSanitizer,t,e.nextActionId):t;this.sendToReduxDevtools(()=>this.extensionConnection.send(s,i))}else{let o=b(I({},e),{stagedActionIds:e.stagedActionIds,actionsById:this.config.actionSanitizer?is(this.config.actionSanitizer,e.actionsById):e.actionsById,computedStates:this.config.stateSanitizer?ss(this.config.stateSanitizer,e.computedStates):e.computedStates});this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,o,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new Z(t=>{let e=this.zoneConfig.connectInZone?this.zoneConfig.ngZone.runOutsideAngular(()=>this.devtoolsExtension.connect(this.getExtensionConfig(this.config))):this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=e,e.init(),e.subscribe(o=>t.next(o)),e.unsubscribe}):fe}createActionStreams(){let t=this.createChangesObservable().pipe(ye()),e=t.pipe($(n=>n.type===wt.START)),o=t.pipe($(n=>n.type===wt.STOP)),i=t.pipe($(n=>n.type===wt.DISPATCH),l(n=>this.unwrapAction(n.payload)),Nt(n=>n.type===se?this.dispatcher.pipe($(y=>y.type===Gt),ue(1e3),de(1e3),l(()=>n),E(()=>w(n)),ft(1)):w(n))),c=t.pipe($(n=>n.type===wt.ACTION),l(n=>this.unwrapAction(n.payload))).pipe(pt(o)),r=i.pipe(pt(o));this.start$=e.pipe(pt(o)),this.actions$=this.start$.pipe(Lt(()=>c)),this.liftedActions$=this.start$.pipe(Lt(()=>r))}unwrapAction(action){return typeof action=="string"?eval(`(${action})`):action}getExtensionConfig(t){let e={name:t.name,features:t.features,serialize:t.serialize,autoPause:t.autoPause??!1,trace:t.trace??!1,traceLimit:t.traceLimit??75};return t.maxAge!==!1&&(e.maxAge=t.maxAge),e}sendToReduxDevtools(t){try{t()}catch(e){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",e)}}};_DevtoolsExtension.\u0275fac=function(e){return new(e||_DevtoolsExtension)(p(ie),p(Mt),p(Ft))},_DevtoolsExtension.\u0275prov=S({token:_DevtoolsExtension,factory:_DevtoolsExtension.\u0275fac});let DevtoolsExtension=_DevtoolsExtension;return DevtoolsExtension})(),Rt={type:Ht},os="@ngrx/store-devtools/recompute",rs={type:os};function Pi(t,e,o,i,s){if(i)return{state:o,error:"Interrupted by an error up the chain"};let c=o,r;try{c=t(o,e)}catch(n){r=n.toString(),s.handleError(n)}return{state:c,error:r}}function jt(t,e,o,i,s,c,r,n,y){if(e>=t.length&&t.length===c.length)return t;let u=t.slice(0,e),v=c.length-(y?1:0);for(let a=e;a<v;a++){let h=c[a],C=s[h].action,d=u[a-1],f=d?d.state:i,D=d?d.error:void 0,P=r.indexOf(h)>-1?d:Pi(o,C,f,D,n);u.push(P)}return y&&u.push(t[t.length-1]),u}function cs(t,e){return{monitorState:e(void 0,{}),nextActionId:1,actionsById:{0:rt(Rt)},stagedActionIds:[0],skippedActionIds:[],committedState:t,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function as(t,e,o,i,s={}){return c=>(r,n)=>{let{monitorState:y,actionsById:u,nextActionId:v,stagedActionIds:a,skippedActionIds:h,committedState:C,currentStateIndex:d,computedStates:f,isLocked:D,isPaused:A}=r||e;r||(u=Object.create(u));function P(x){let g=x,G=a.slice(1,g+1);for(let j=0;j<G.length;j++)if(f[j+1].error){g=j,G=a.slice(1,g+1);break}else delete u[G[j]];h=h.filter(j=>G.indexOf(j)===-1),a=[0,...a.slice(g+1)],C=f[g].state,f=f.slice(g),d=d>g?d-g:0}function Y(){u={0:rt(Rt)},v=1,a=[0],h=[],C=f[d].state,d=0,f=[]}let m=0;switch(n.type){case Ai:{D=n.status,m=1/0;break}case Oi:{A=n.status,A?(a=[...a,v],u[v]=new W({type:"@ngrx/devtools/pause"},+Date.now()),v++,m=a.length-1,f=f.concat(f[f.length-1]),d===a.length-2&&d++,m=1/0):Y();break}case vi:{u={0:rt(Rt)},v=1,a=[0],h=[],C=t,d=0,f=[];break}case xi:{Y();break}case Ei:{u={0:rt(Rt)},v=1,a=[0],h=[],d=0,f=[];break}case Si:{let{id:x}=n;h.indexOf(x)===-1?h=[x,...h]:h=h.filter(G=>G!==x),m=a.indexOf(x);break}case bi:{let{start:x,end:g,active:G}=n,j=[];for(let Pt=x;Pt<g;Pt++)j.push(Pt);G?h=hi(h,j):h=[...h,...j],m=a.indexOf(x);break}case Ti:{d=n.index,m=1/0;break}case Ci:{let x=a.indexOf(n.actionId);x!==-1&&(d=x),m=1/0;break}case Ii:{a=hi(a,h),h=[],d=Math.min(d,a.length-1);break}case ct:{if(D)return r||e;if(A||r&&ne(r.computedStates[d],n,s.predicate,s.actionsSafelist,s.actionsBlocklist)){let g=f[f.length-1];f=[...f.slice(0,-1),Pi(c,n.action,g.state,g.error,o)],m=1/0;break}s.maxAge&&a.length===s.maxAge&&P(1),d===a.length-1&&d++;let x=v++;u[x]=n,a=[...a,x],m=a.length-1;break}case se:{({monitorState:y,actionsById:u,nextActionId:v,stagedActionIds:a,skippedActionIds:h,committedState:C,currentStateIndex:d,computedStates:f,isLocked:D,isPaused:A}=n.nextLiftedState);break}case Ht:{m=0,s.maxAge&&a.length>s.maxAge&&(f=jt(f,m,c,C,u,a,h,o,A),P(a.length-s.maxAge),m=1/0);break}case Gt:{if(f.filter(g=>g.error).length>0)m=0,s.maxAge&&a.length>s.maxAge&&(f=jt(f,m,c,C,u,a,h,o,A),P(a.length-s.maxAge),m=1/0);else{if(!A&&!D){d===a.length-1&&d++;let g=v++;u[g]=new W(n,+Date.now()),a=[...a,g],m=a.length-1,f=jt(f,m,c,C,u,a,h,o,A)}f=f.map(g=>b(I({},g),{state:c(g.state,rs)})),d=a.length-1,s.maxAge&&a.length>s.maxAge&&P(a.length-s.maxAge),m=1/0}break}default:{m=1/0;break}}return f=jt(f,m,c,C,u,a,h,o,A),y=i(y,n),{monitorState:y,actionsById:u,nextActionId:v,stagedActionIds:a,skippedActionIds:h,committedState:C,currentStateIndex:d,computedStates:f,isLocked:D,isPaused:A}}}var gi=(()=>{let e=class e{constructor(i,s,c,r,n,y,u,v){let a=cs(u,v.monitor),h=as(u,a,y,v.monitor,v),C=J(J(s.asObservable().pipe(ve(1)),r.actions$).pipe(l(rt)),i,r.liftedActions$).pipe(pe(ae)),d=c.pipe(l(h)),f=ki(v.connectInZone),D=new ce(1);this.liftedStateSubscription=C.pipe(Ee(d),yi(f),ge(({state:Y},[m,x])=>{let g=x(Y,m);return m.type!==ct&&Fi(v)&&(g=ns(g,v.predicate,v.actionsSafelist,v.actionsBlocklist)),r.notify(m,g),{state:g,action:m}},{state:a,action:null})).subscribe(({state:Y,action:m})=>{if(D.next(Y),m.type===ct){let x=m.action;n.next(x)}}),this.extensionStartSubscription=r.start$.pipe(yi(f)).subscribe(()=>{this.refresh()});let A=D.asObservable(),P=A.pipe(l(ji));Object.defineProperty(P,"state",{value:Ue(P,{manualCleanup:!0,requireSync:!0})}),this.dispatcher=i,this.liftedState=A,this.state=P}ngOnDestroy(){this.liftedStateSubscription.unsubscribe(),this.extensionStartSubscription.unsubscribe()}dispatch(i){this.dispatcher.next(i)}next(i){this.dispatcher.next(i)}error(i){}complete(){}performAction(i){this.dispatch(new W(i,+Date.now()))}refresh(){this.dispatch(new Vt)}reset(){this.dispatch(new Kt(+Date.now()))}rollback(){this.dispatch(new Zt(+Date.now()))}commit(){this.dispatch(new Xt(+Date.now()))}sweep(){this.dispatch(new Yt)}toggleAction(i){this.dispatch(new Jt(i))}jumpToAction(i){this.dispatch(new qt(i))}jumpToState(i){this.dispatch(new Wt(i))}importState(i){this.dispatch(new Qt(i))}lockChanges(i){this.dispatch(new te(i))}pauseRecording(i){this.dispatch(new ee(i))}};e.\u0275fac=function(s){return new(s||e)(p(Ft),p(bt),p(Ve),p(Di),p(Tt),p(lt),p(ze),p(Mt))},e.\u0275prov=S({token:e,factory:e.\u0275fac});let t=e;return t})();function yi({ngZone:t,connectInZone:e}){return o=>e?new Z(i=>o.subscribe({next:s=>t.run(()=>i.next(s)),error:s=>t.run(()=>i.error(s)),complete:()=>t.run(()=>i.complete())})):o}var fs=new O("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function ps(t,e){return!!t||e.monitor!==wi}function us(){let t="__REDUX_DEVTOOLS_EXTENSION__";return typeof window=="object"&&typeof window[t]<"u"?window[t]:null}function oe(t={}){return dt([Di,Ft,gi,{provide:li,useValue:t},{provide:fs,deps:[ie,Mt],useFactory:ps},{provide:ie,useFactory:us},{provide:Mt,deps:[li],useFactory:es},{provide:Ze,deps:[gi],useFactory:ds},{provide:Ke,useExisting:Ft}])}function ds(t){return t.state}var mn=(()=>{let e=class e{static instrument(i={}){return{ngModule:e,providers:[oe(i)]}}};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=Bt({type:e}),e.\u0275inj=Ut({});let t=e;return t})();var ls={dispatch:!0,functional:!1,useEffectsErrorHandler:!0},kt="__@ngrx/effects_create__";function z(t,e={}){let o=e.functional?t:t(),i=I(I({},ls),e);return Object.defineProperty(o,kt,{value:i}),o}function hs(t){return Object.getOwnPropertyNames(t).filter(i=>t[i]&&t[i].hasOwnProperty(kt)?t[i][kt].hasOwnProperty("dispatch"):!1).map(i=>{let s=t[i][kt];return I({propertyName:i},s)})}function ms(t){return hs(t)}function $i(t){return Object.getPrototypeOf(t)}function gs(t){return!!t.constructor&&t.constructor.name!=="Object"&&t.constructor.name!=="Function"}function Ni(t){return typeof t=="function"}function ys(t){return t.filter(Ni)}function vs(t,e,o){let i=$i(t),c=!!i&&i.constructor.name!=="Object"?i.constructor.name:null,r=ms(t).map(({propertyName:n,dispatch:y,useEffectsErrorHandler:u})=>{let v=typeof t[n]=="function"?t[n]():t[n],a=u?o(v,e):v;return y===!1?a.pipe(le()):a.pipe(me()).pipe(l(C=>({effect:t[n],notification:C,propertyName:n,sourceName:c,sourceInstance:t})))});return J(...r)}var Es=10;function _i(t,e,o=Es){return t.pipe(E(i=>(e&&e.handleError(i),o<=1?t:_i(t,e,o-1))))}var Dt=(()=>{let e=class e extends Z{constructor(i){super(),i&&(this.source=i)}lift(i){let s=new e;return s.source=this,s.operator=i,s}};e.\u0275fac=function(s){return new(s||e)(p(Tt))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function H(...t){return $(e=>t.some(o=>typeof o=="string"?o===e.type:o.type===e.type))}var Rn=new O("@ngrx/effects Internal Root Guard"),Mn=new O("@ngrx/effects User Provided Effects"),Fn=new O("@ngrx/effects Internal Root Effects"),kn=new O("@ngrx/effects Internal Root Effects Instances"),Dn=new O("@ngrx/effects Internal Feature Effects"),Pn=new O("@ngrx/effects Internal Feature Effects Instance Groups"),xs=new O("@ngrx/effects Effects Error Handler",{providedIn:"root",factory:()=>_i}),Is="@ngrx/effects/init",Ss=Be(Is);function bs(t,e){if(t.notification.kind==="N"){let o=t.notification.value;!Ts(o)&&e.handleError(new Error(`Effect ${Cs(t)} dispatched an invalid action: ${As(o)}`))}}function Ts(t){return typeof t!="function"&&t&&t.type&&typeof t.type=="string"}function Cs({propertyName:t,sourceInstance:e,sourceName:o}){let i=typeof e[t]=="function";return!!o?`"${o}.${String(t)}${i?"()":""}"`:`"${String(t)}()"`}function As(t){try{return JSON.stringify(t)}catch{return t}}var Os="ngrxOnIdentifyEffects";function ws(t){return re(t,Os)}var js="ngrxOnRunEffects";function Rs(t){return re(t,js)}var Ms="ngrxOnInitEffects";function Fs(t){return re(t,Ms)}function re(t,e){return t&&e in t&&typeof t[e]=="function"}var Li=(()=>{let e=class e extends at{constructor(i,s){super(),this.errorHandler=i,this.effectsErrorHandler=s}addEffects(i){this.next(i)}toActions(){return this.pipe(_t(i=>gs(i)?$i(i):i),$t(i=>i.pipe(_t(ks))),$t(i=>{let s=i.pipe(R(r=>Ds(this.errorHandler,this.effectsErrorHandler)(r)),l(r=>(bs(r,this.errorHandler),r.notification)),$(r=>r.kind==="N"&&r.value!=null),he()),c=i.pipe(ft(1),$(Fs),l(r=>r.ngrxOnInitEffects()));return J(s,c)}))}};e.\u0275fac=function(s){return new(s||e)(p(lt),p(xs))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function ks(t){return ws(t)?t.ngrxOnIdentifyEffects():""}function Ds(t,e){return o=>{let i=vs(o,t,e);return Rs(o)?o.ngrxOnRunEffects(i):i}}var Ps=(()=>{let e=class e{get isStarted(){return!!this.effectsSubscription}constructor(i,s){this.effectSources=i,this.store=s,this.effectsSubscription=null}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}};e.\u0275fac=function(s){return new(s||e)(p(Li),p(N))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Ui(...t){let e=t.flat(),o=ys(e);return dt([o,{provide:be,multi:!0,useValue:()=>{_(He),_(Ge,{optional:!0});let i=_(Ps),s=_(Li),c=!i.isStarted;c&&i.start();for(let r of e){let n=Ni(r)?_(r):r;s.addEffects(n)}c&&_(N).dispatch(Ss())}}])}var $s={token:null,isAuthenticated:!1,userLoggedIn:null,isLoading:!1},zi=Ct($s,M(Q,(t,{result:e})=>b(I({},t),{token:e.token??e.msg,isAuthenticated:!!e.data,userLoggedIn:e.data??null})),M(F,t=>b(I({},t),{isLoading:!0})),M(k,t=>b(I({},t),{isLoading:!1})),M(ot,(t,{result:e})=>b(I({},t),{token:e.msg})));var Hi=(()=>{let e=class e{constructor(i,s){this.http=i,this.toast=s,this.options={headers:new It({"Content-Type":"application/json","Access-Control-Allow-Origin":"https://back-am-production.up.railway.app"})}}login(i,s){let c={email:i,password:s};return this.http.post(`${B.users}/login`,c,this.options).pipe(l(r=>r),E(r=>(r.status===500&&this.toast.show("error","Error del Servidor","Int\xE9ntalo de nuevo m\xE1s tarde."),r)))}register(i){let s=i;return this.http.post(`${B.users}/signin`,s,this.options).pipe(l(c=>c),E(c=>{throw c}))}};e.\u0275fac=function(s){return new(s||e)(p(St),p(At))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Gi=(()=>{let e=class e{constructor(i,s,c){this.actions$=i,this.authService=s,this.store=c,this.login$=z(()=>this.actions$.pipe(H(qe),T(()=>this.store.dispatch(F())),R(r=>this.authService.login(r.email,r.password).pipe(l(n=>Q({result:n})),E(n=>w(Q({result:n}))))),T(()=>this.store.dispatch(k())))),this.register$=z(()=>this.actions$.pipe(H(ri),T(()=>this.store.dispatch(F())),R(r=>this.authService.register(r.user).pipe(l(n=>ot({result:n})),E(n=>w(ot({result:n}))))),T(()=>this.store.dispatch(k()))))}};e.\u0275fac=function(s){return new(s||e)(p(Dt),p(Hi),p(N))},e.\u0275prov=S({token:e,factory:e.\u0275fac});let t=e;return t})();var Vi=(()=>{let e=class e{constructor(i){this.http=i}getOptions(i){return{headers:new It({"Content-Type":"application/json","Access-Control-Allow-Origin":"https://back-am-production.up.railway.app",Authorization:`Bearer ${i}`})}}update(i,s,c){let r={user:i,newPassword:s},n=this.getOptions(c);return this.http.post(`${B.users}/update`,r,n).pipe(l(y=>y),E(y=>{throw y}))}getProgress(i,s){let c={id:i},r=this.getOptions(s);return this.http.post(`${B.acitivity}/progress/general`,c,r).pipe(l(n=>n),E(n=>{throw n}))}getActivities(i,s){let c={id:i},r=this.getOptions(s);return this.http.post(`${B.acitivity}/get-by-user`,c,r).pipe(l(n=>n),E(n=>{throw n}))}updateProgress(i,s){let c=i,r=this.getOptions(s);return this.http.post(`${B.acitivity}/progress/update`,c,r).pipe(l(n=>n),E(n=>{throw n}))}getActivityById(i,s){let c={id:i},r=this.getOptions(s);return this.http.post(`${B.acitivity}/get`,c,r).pipe(l(n=>n),E(n=>{throw n}))}};e.\u0275fac=function(s){return new(s||e)(p(St))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Ki=(()=>{let e=class e{constructor(i,s,c){this.actions$=i,this.userService=s,this.store=c,this.updateUser$=z(()=>this.actions$.pipe(H(ei),T(()=>this.store.dispatch(F())),R(r=>this.userService.update(r.user,r.newPassword,r.token).pipe(l(n=>tt({result:n})),E(n=>w(tt({result:n}))))),T(()=>this.store.dispatch(k())))),this.userProgress$=z(()=>this.actions$.pipe(H(ii),T(()=>this.store.dispatch(F())),R(r=>this.userService.getProgress(r.id,r.token).pipe(l(n=>et({result:n})),E(n=>w(et({result:n}))))),T(()=>this.store.dispatch(k())))),this.userActivities$=z(()=>this.actions$.pipe(H(si),T(()=>this.store.dispatch(F())),R(r=>this.userService.getActivities(r.id,r.token).pipe(l(n=>it({result:n})),E(n=>w(it({result:n}))))),T(()=>this.store.dispatch(k())))),this.userProgressUpdate$=z(()=>this.actions$.pipe(H(ni),T(()=>this.store.dispatch(F())),R(r=>this.userService.updateProgress(r.progress,r.token).pipe(l(n=>st({result:n})),E(n=>w(st({result:n}))))),T(()=>this.store.dispatch(k())))),this.userGetActivity$=z(()=>this.actions$.pipe(H(oi),T(()=>this.store.dispatch(F())),R(r=>this.userService.getActivityById(r.id,r.token).pipe(l(n=>nt({result:n})),E(n=>w(nt({result:n}))))),T(()=>this.store.dispatch(k()))))}};e.\u0275fac=function(s){return new(s||e)(p(Dt),p(Vi),p(N))},e.\u0275prov=S({token:e,factory:e.\u0275fac});let t=e;return t})();var Us={updated:null,progress:null,hasProgressBeenUpdated:null,activities:null,hasAccess:null},Zi=Ct(Us,M(tt,(t,{result:e})=>b(I({},t),{updated:e.msg,hasAccess:!!e.msg})),M(et,(t,{result:e})=>b(I({},t),{progress:e.data?e.data:null,hasAccess:!!e.data})),M(it,(t,{result:e})=>b(I({},t),{activities:e.data?e.data:null})),M(st,(t,{result:e})=>b(I({},t),{hasProgressBeenUpdated:e.msg})),M(nt,(t,{result:e})=>b(I({},t),{activities:e})));var Xi={providers:[Le(pi),$e(),ke(De()),Xe({auth:zi,user:Zi}),oe({maxAge:25,logOnly:!je()}),Ui(Gi,Ki)]};var Bs={providers:[Ne()]},Yi=Re(Xi,Bs);var zs=()=>Pe(fi,Yi),Mo=zs;export{Mo as a};
