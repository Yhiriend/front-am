import './polyfills.server.mjs';
import{a as V,c as $}from"./chunk-UBCID47O.mjs";import{A as m,B as q,C as U,D as B,F as G,G as P,H as O,b as v,c as w,n as D,t as L,u as A,w as E,x as c,y as N,z as T}from"./chunk-TNSAREYT.mjs";import{c as k}from"./chunk-KCQOCMHZ.mjs";import{Ab as I,Db as R,Eb as M,Sa as a,Ta as p,Y as f,ab as u,c as y,f as x,gb as i,hb as o,ia as S,ib as b,ob as h,pc as _,qc as j,r as F,tb as s,ub as C}from"./chunk-OUEVK6MT.mjs";var z=v("[Auth/Login] Logging in",w()),H=v("[Auth/Login] Login Response",w());var de=(()=>{let n=class n{constructor(l,e,t){this.router=l,this.store=e,this.fb=t,this.ngUnsubscribe=new x,this.loginForm=new T({email:new m(""),password:new m("")}),this.invalidMessage$=new y,this.loginForm=this.fb.group({email:new m("",[c.required,c.email]),password:new m("",c.required)})}ngOnDestroy(){this.ngUnsubscribe.next(null),this.ngUnsubscribe.complete()}onSubmitLogin(l){if(l.preventDefault(),this.loginForm.valid){let e=this.loginForm.controls.email.value,t=this.loginForm.controls.password.value;this.store.dispatch(z({email:e,password:t})),this.store.select(L).pipe(f(this.ngUnsubscribe)).subscribe(({isAuthenticated:r,token:g,userLoggedIn:J})=>{if(console.log("login",r),r){console.log("athenticated",r);let K=V({token:g,isAuthenticated:r,userLoggedIn:J},$.secretKey);localStorage.setItem("token",JSON.stringify(K)),this.router.navigate(["/dashboard"])}})}this.invalidMessage$=this.store.select(A).pipe(F(e=>e==="Invalid Password"?e:e==null?"":"Invalid Credentials"),f(this.ngUnsubscribe))}goToRegisterPage(){this.router.navigate(["/register"])}};n.\u0275fac=function(e){return new(e||n)(p(k),p(D),p(B))},n.\u0275cmp=S({type:n,selectors:[["app-login"]],standalone:!0,features:[I],decls:20,vars:8,consts:[["id","body-login",1,"w-full","h-full","flex","justify-center","items-center"],[1,"flex","flex-col","justify-center","items-center","bg-white","opacity-90","shadow-lg","border-2","rounded-lg","w-72","h-fit","p-4"],[1,"font-bold","text-slate-800","text-4xl","text-center","my-8"],[1,"w-full","p-0","flex","justify-center","flex-col","items-center",3,"formGroup","submit"],[1,"m-2","w-full"],["inputId","email","inputName","email","placeholder","Correo electr\xF3nico",3,"inputRequired","control"],["inputId","password","inputName","password","placeholder","Contrase\xF1a",3,"control","inputRequired"],[1,"relative","w-full"],[1,"absolute","w-full","text-center","text-red-700","text-sm"],[1,"my-6","w-full"],["buttonType","submit"],[1,"text-slate-600"],[1,"text-pink-500","hover:underline","hover:cursor-pointer",3,"click"]],template:function(e,t){e&1&&(i(0,"div",0)(1,"div",1)(2,"h1",2),s(3," App-Web Better Cognition "),o(),i(4,"form",3),h("submit",function(g){return t.onSubmitLogin(g)}),i(5,"div",4),b(6,"app-am-input",5),o(),i(7,"div",4),b(8,"app-am-input",6),o(),i(9,"div",7)(10,"p",8),s(11),R(12,"async"),o()(),i(13,"div",9)(14,"app-am-button",10),s(15,"Iniciar sesi\xF3n"),o()(),i(16,"p",11),s(17," \xBFNo tienes una cuenta? "),i(18,"a",12),h("click",function(){return t.goToRegisterPage()}),s(19,"Reg\xEDstrate"),o()()()()()),e&2&&(a(4),u("formGroup",t.loginForm),a(2),u("inputRequired",!0)("control",t.loginForm.controls.email),a(2),u("control",t.loginForm.controls.password)("inputRequired",!0),a(3),C(M(12,6,t.invalidMessage$)))},dependencies:[j,_,O,E,P,G,q,N,U],styles:['#body-login[_ngcontent-%COMP%]{background-image:url("./media/9104593-CVIAY5CR.jpg");background-size:cover;background-position:center center;background-repeat:no-repeat;overflow:auto}']});let d=n;return d})();export{z as a,H as b,de as c};
